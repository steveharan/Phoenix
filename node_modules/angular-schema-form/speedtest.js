
var template = '<div sf-array="form" class="schema-form-array {{form.htmlClass}} sf-value" ng-model="$$value$$" ng-model-options="form.ngModelOptions"><h3 ng-show="form.title && form.notitle !== true">{{ form.title }}</h3><ol class="list-group sf-value" ng-model="modelArray" ui-sortable=""><li class="list-group-item {{form.fieldHtmlClass}}" ng-repeat="item in modelArray track by $index"><button ng-hide="form.readonly || form.remove === null" ng-click="deleteFromArray($index)" style="position: relative; z-index: 20;" type="button" class="close pull-right"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><sf-decorator ng-init="arrayIndex = $index" form="copyWithIndex($index)"></sf-decorator></li></ol><div class="clearfix" style="padding: 15px;"><button ng-hide="form.readonly || form.add === null" ng-click="appendToArray()" type="button" class="btn {{ form.style.add || \'btn-default\' }} pull-right"><i class="glyphicon glyphicon-plus"></i> {{ form.add || \'Add\'}}</button></div><div class="help-block" ng-show="(hasError() && errorMessage(schemaError())) || form.description" ng-bind-html="(hasError() && errorMessage(schemaError())) || form.description"></div></div>';
var speedTest = function(iterations) {

  console.time('replace')

  var key = "foobar.baz";
  for (var i = 0; i < iterations; i++) {
      template = template.replace(
        /\$\$value\$\$/g,
        'model' + (key[0] !== '[' ? '.' : '') + key
      );
  }
  console.timeEnd('replace');

  var frag = document.createDocumentFragment();
  var div = document.createElement('div');
  div.innerHTML = template;

  while (div.childNodes.length > 0) {
    frag.appendChild(div.childNodes[0]);
  }

  console.time('query');
  for (i = 0; i < iterations; i++) {
    var nodes = frag.querySelectorAll('[ng-model]');
    for (var j=0; nodes.length < j; j++) {
      nodes[j].setAttribute('ng-model', 'foo.baz');
    }

  }
  console.timeEnd('query');


  console.time('queryClass');
  for (i = 0; i < iterations; i++) {
    var nodes = frag.querySelectorAll('.sf-value');
    for (var j=0; nodes.length < j; j++) {
      nodes[j].setAttribute('ng-model', 'foo.baz');
    }

  }
  console.timeEnd('queryClass');



};
